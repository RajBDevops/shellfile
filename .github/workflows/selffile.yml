name: Docker install in EC2

on: push

jobs:
  install-docker:
    runs-on: self-hosted
    steps:
      - name: Check out the code
        uses: actions/checkout@v2
      - name: Check if Docker exists and run the correct script
        run: |
          if command -v docker &> /dev/null; then
            echo "Docker is already installed. Running docker.sh..."
            chmod +x docker.sh .
            ./docker.sh
          else
            echo "Docker not found. Running mydocker.sh to install it..."
            chmod +x mydocker.sh .
            ./mydocker.sh
          fi
